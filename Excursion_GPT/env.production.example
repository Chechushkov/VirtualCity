# Excursion GPT Production Environment Configuration
# Copy this file to .env.production and fill in the values

# ============================================
# DATABASE CONFIGURATION
# ============================================
POSTGRES_DB=3D_Excursion
POSTGRES_USER=postgres
# CHANGE THIS: Generate a strong password
POSTGRES_PASSWORD=your_strong_database_password_here
POSTGRES_PORT=5432
POSTGRES_DATA_PATH=./data/postgres

# ============================================
# MINIO OBJECT STORAGE
# ============================================
MINIO_ROOT_USER=admin
# CHANGE THIS: Generate a strong password
MINIO_ROOT_PASSWORD=your_strong_minio_password_here
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_DATA_PATH=./data/minio
MINIO_REGION=us-east-1

# ============================================
# APPLICATION CONFIGURATION
# ============================================
API_PORT=5000
ASPNETCORE_ENVIRONMENT=Production

# JWT Authentication
# CHANGE THIS: Generate a strong secret key (minimum 64 characters)
JWT_KEY=your_very_long_and_secure_jwt_secret_key_minimum_64_characters_long_for_better_security_123456
JWT_ISSUER=ExcursionGPTApi
JWT_AUDIENCE=ExcursionGPTClients
JWT_EXPIRE_MINUTES=1440

# Rate Limiting
RATE_LIMIT_PERMIT=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_QUEUE=0

# ============================================
# REDIS CACHE (Optional)
# ============================================
REDIS_PASSWORD=your_redis_password_here
REDIS_PORT=6379
REDIS_DATA_PATH=./data/redis

# ============================================
# MONITORING (Optional)
# ============================================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_DATA_PATH=./data/prometheus

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_DATA_PATH=./data/grafana

# ============================================
# SECURITY SETTINGS
# ============================================
# CORS Origins (comma-separated)
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# HTTPS Settings
ENABLE_HTTPS=true
SSL_CERT_PATH=./nginx/ssl/certificate.crt
SSL_KEY_PATH=./nginx/ssl/private.key

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=Information
LOG_RETENTION_DAYS=30
LOG_FILE_SIZE_LIMIT_MB=100

# ============================================
# FILE UPLOAD LIMITS
# ============================================
MAX_UPLOAD_SIZE_MB=100
MAX_REQUEST_SIZE_MB=100

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=noreply@yourdomain.com
SMTP_ENABLE_SSL=true

# ============================================
# EXTERNAL SERVICES (Optional)
# ============================================
# OpenAI API (if using GPT features)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ORGANIZATION=your_organization_id

# Google Maps API (if using location features)
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ============================================
# NETWORK CONFIGURATION
# ============================================
NETWORK_SUBNET=172.20.0.0/16
NETWORK_NAME=excursion-network-prod

# ============================================
# RESOURCE LIMITS
# ============================================
# API Container
API_CPU_LIMIT=2
API_MEMORY_LIMIT=2G
API_CPU_RESERVATION=0.5
API_MEMORY_RESERVATION=512M

# Database Container
POSTGRES_CPU_LIMIT=2
POSTGRES_MEMORY_LIMIT=4G
POSTGRES_CPU_RESERVATION=1
POSTGRES_MEMORY_RESERVATION=1G

# MinIO Container
MINIO_CPU_LIMIT=1
MINIO_MEMORY_LIMIT=2G
MINIO_CPU_RESERVATION=0.5
MINIO_MEMORY_RESERVATION=512M

# ============================================
# DEPLOYMENT SETTINGS
# ============================================
# Watchtower automatic updates
WATCHTOWER_ENABLED=true
WATCHTOWER_INTERVAL=3600
WATCHTOWER_CLEANUP=true
WATCHTOWER_ROLLING_RESTART=true

# Health check settings
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=60s

# ============================================
# ENCRYPTION KEYS (Optional)
# ============================================
# For encrypting sensitive data at rest
ENCRYPTION_KEY=your_encryption_key_here_32_bytes_base64_encoded

# ============================================
# SESSION CONFIGURATION
# ============================================
SESSION_TIMEOUT_MINUTES=30
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# ============================================
# DEBUG SETTINGS
# ============================================
# Only enable in development/staging
ENABLE_SWAGGER=false
ENABLE_DETAILED_ERRORS=false
ENABLE_DEVELOPER_EXCEPTION_PAGE=false

# ============================================
# CUSTOM DOMAIN
# ============================================
DOMAIN_NAME=yourdomain.com
API_DOMAIN=api.yourdomain.com
CONSOLE_DOMAIN=console.yourdomain.com

# ============================================
# NOTES
# ============================================
# 1. All passwords should be strong and unique
# 2. Generate JWT_KEY using: openssl rand -base64 64
# 3. Generate POSTGRES_PASSWORD using: openssl rand -base64 32
# 4. Generate MINIO_ROOT_PASSWORD using: openssl rand -base64 32
# 5. Keep this file secure and never commit to version control
# 6. Use environment-specific files: .env.production, .env.staging, .env.development
# 7. For Docker Swarm/Kubernetes, use secrets instead of environment variables

# ============================================
# QUICK SETUP COMMANDS
# ============================================
# To generate secure passwords:
# JWT_KEY: openssl rand -base64 64
# POSTGRES_PASSWORD: openssl rand -base64 32
# MINIO_ROOT_PASSWORD: openssl rand -base64 32
# REDIS_PASSWORD: openssl rand -base64 32
# ENCRYPTION_KEY: openssl rand -base64 32

# To start production environment:
# 1. cp env.production.example .env.production
# 2. Edit .env.production and fill in all values
# 3. docker-compose -f docker-compose.prod.yml --env-file .env.production up -d

# To check status:
# docker-compose -f docker-compose.prod.yml ps
# docker-compose -f docker-compose.prod.yml logs -f

# To update services:
# docker-compose -f docker-compose.prod.yml --env-file .env.production up -d --build

# To backup database:
# docker-compose -f docker-compose.prod.yml exec postgres pg_dump -U postgres 3D_Excursion > backup_$(date +%Y%m%d_%H%M%S).sql

# ============================================
# SECURITY CHECKLIST
# ============================================
# [ ] All passwords changed from defaults
# [ ] JWT_KEY is 64+ characters
# [ ] SSL certificates configured
# [ ] Firewall rules configured
# [ ] Regular backups enabled
# [ ] Monitoring enabled
# [ ] Logging configured
# [ ] Rate limiting enabled
# [ ] CORS properly configured
# [ ] Security headers configured in Nginx
# [ ] Containers running as non-root users
# [ ] Resource limits configured
# [ ] Network segmentation configured
# [ ] Secrets stored securely (not in .env files for production)
